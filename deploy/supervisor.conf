[program:aml-monitoring]
command=/opt/aml-monitoring/venv/bin/gunicorn app.main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 127.0.0.1:50000
directory=/opt/aml-monitoring
user=amlapp
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/aml-monitoring/supervisor.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PATH="/opt/aml-monitoring/venv/bin",PYTHONPATH="/opt/aml-monitoring"

[program:aml-monitoring-worker]
command=/opt/aml-monitoring/venv/bin/python -m app.workers.transaction_worker
directory=/opt/aml-monitoring
user=amlapp
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/aml-monitoring/worker.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PATH="/opt/aml-monitoring/venv/bin",PYTHONPATH="/opt/aml-monitoring"
numprocs=2
process_name=%(program_name)s_%(process_num)02d